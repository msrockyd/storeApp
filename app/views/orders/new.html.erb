 <%= javascript_include_tag "orders" %>
  <%= tag :meta, :name => "stripe-key", :content => STRIPE_PUBLIC_KEY %>
<div class="section">
	    	<div class="container">

	    		<div class="row">
		    		<div class="col-sm-offset-1 col-sm-5">
		    			<br>
		    			<h3>Shipping Address</h3>
		    		</div>
					<div class="col-sm-5">
						<br>
						<h3>Payment Details</h3>
						<%= render partial: "layouts/flash_messages", flash: flash %>
					</div>
				</div>	
				<div class="row">
					<%= form_for @order do |f| %>
					<div class="col-sm-offset-1 col-sm-5">
						<div class="basic-login">
							<div class="form-group">
	        				 	<label for="login-username"><i class="icon-user"></i> <b>Recipient First Name</b></label>
								<input type="text" required="required"  name="recipient[first_name]" class="form-control">
							</div>
							<div class="form-group">
	        				 	<label for="login-username"><i class="icon-user"></i> <b>Recipient Last Name</b></label>
								<input type="text" required="required"  name="recipient[last_name]" class="form-control">
							</div>
							<div class="form-group">
	        				 	<label for="login-username"><i class="icon-user"></i> <b>Phone Number</b></label>
								<input type="number" required="required"  name="recipient[phone_number]" class="form-control">
							</div>

							<div class="form-group">
	        				 	<label for="login-username"><i class="icon-user"></i> <b>Address</b></label>
	        				 	<textarea required  name="recipient[address]" class="form-control"> </textarea> 
								
							</div>

							<div class="form-group">
	        				 	<label for="login-username"><i class="icon-user"></i> <b>PIN</b></label>
								<input type="number" required="required"  name="recipient[pin]" class="form-control">
							</div>

							<div class="form-group">
	        				 	<label for="login-username"><i class="icon-user"></i> <b>City</b></label>
								<input type="tel" required="required"  name="recipient[city]" class="form-control">
							</div>
							<div class="form-group">
	        				 	<label for="login-username"><i class="icon-user"></i> <b>State/Region</b></label>
								<input type="tel" required="required"  name="recipient[state]" class="form-control">
							</div>
						</div>
					</div>

					<div class="col-sm-5">
						<div class="basic-login">
							
					
								<%= f.hidden_field :cart_id, value: params[:cart_id].to_i%>
  								<%= f.hidden_field :stripe_card_token %>

  								<div class="form-group">
		        				 	<label for="login-username"><i class="icon-user"></i> <b>Total Amount</b></label>
									<input type="text" required="required"  name="order[amount]" id="order_amount" class="form-control" value="<%= @total_price %>" readonly>
								</div>

								<div class="form-group">
		        				 	<label for="login-username"><i class="icon-user"></i> <b>First Name</b></label>
									<%= f.text_field :name, autofocus: true, :class => "form-control", :placeholder => "First Name",:required => true %>
								</div>
								<div class="form-group">
		        				 	<label for="login-username"><i class="icon-user"></i> <b>Last Name</b></label>
									<%= f.text_field :last_name, :class => "form-control", :placeholder => "Last Name",:required => true %>
								</div>

								<div class="form-group">
		        				 	<label for="login-username"><i class="icon-user"></i> <b>Email</b></label>
									<%= f.email_field :email,  :class => "form-control", :value => current_user.email, :readonly => true %>
								</div>
								<div class="form-group">
		        				 	<label for="login-username"><i class="icon-user"></i> <b>Card Type</b></label>
		        				 	<%= f.select :card_type, [["Visa", "visa"], ["MasterCard", "master"], ["Discover", "discover"], ["American Express", "american_express"]], :class => "form-control" %>
									
								</div>

								<div class="form-group">
		        				 	<label for="login-username"><i class="icon-user"></i> <b>Card Number</b></label>
									<%= f.text_field :card_number, :class => "form-control", :placeholder => "Card number",:required => true %>
								</div>

								<div class="form-group">
		        				 	<label for="login-username"><i class="icon-user"></i> <b>Card Verification Value (CVV)</b></label>
									<%= f.text_field :card_verification, :class => "form-control", :placeholder => "CVV",:required => true %>
								</div>

								<div class="form-group">
		        				 	<label for="login-username"><i class="icon-user"></i> <b>Card expires on</b></label>
									<%= f.date_select :card_expires_on, :discard_day => true, :start_year => Date.today.year, :end_year => (Date.today.year+15), :add_month_numbers => true %>
								</div>
								
								<div class="form-group">
									<%= f.submit "Place your order", :class=>"btn btn-blue"%>
									
									<div class="clearfix"></div>
									<div id="stripe_error" style="color:red;">
									</div>
								</div>
							<% end %>
						</div>
						
					</div>
					
				</div>
				<!-- end of paymeny -->
			</div>
		</div>
